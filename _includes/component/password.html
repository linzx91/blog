<style>
.prompt-container {
	display:none
}
.prompt-mask {
	position:fixed;
	top:0;
	left:0;
	width:100%;
	height:100%;
	margin:0;
	padding:0;
	z-index:199999;
	display:flex;
	flex-direction:column;
	justify-content:center;
	align-items:center;
	background:rgba(48,48,51,.9);
	-webkit-overflow-scrolling:touch;
	-webkit-transform:translateZ(0);
	transform:translateZ(0);
	-webkit-user-select:none;
	-moz-user-select:none;
	-ms-user-select:none;
	user-select:none
}
@supports (-webkit-backdrop-filter:brightness(70%) blur(10px)) or (backdrop-filter:brightness(70%) blur(10px)) {
	.prompt-mask {
		background-color:rgba(0,0,0,0);
		-webkit-backdrop-filter:brightness(70%) blur(10px);
		backdrop-filter:brightness(70%) blur(10px)
	}
}
.prompt-box {
	position:relative;
	width:95%;
	max-width:400px;
	max-height:95%;
	margin:0;
	padding:0;
	display:flex;
	flex-direction:column;
	justify-content:center;
	align-items:center;
	background:#fafafa;
	border-top:5px solid #66c;
	border-radius:2px;
	box-shadow:0 5px 10px 0 rgba(0,0,0,.3);
	overflow:hidden
}
@media screen and (min-height:600px) {
	.prompt-box {
		max-height:400px;
	}
}
.preloader {
	position:absolute;
	z-index:99;
	width:30%;
	height:96px;
	max-width:192px;
	background-size:contain;
	background-position:center;
	background-repeat:no-repeat;
	background-image:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0ibGRzLW1lc3NhZ2UiIHdpZHRoPSI4MHB4IiAgaGVpZ2h0PSI4MHB4IiAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwIDUwKSI+CjxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSI3IiBmaWxsPSIjNjY2NmNjIiB0cmFuc2Zvcm09InNjYWxlKDAuOTkyNzUgMC45OTI3NSkiPgogIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGJlZ2luPSItMC4zNzVzIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlTcGxpbmVzPSIwLjMgMCAwLjcgMTswLjMgMCAwLjcgMSIgdmFsdWVzPSIwOzE7MCIga2V5VGltZXM9IjA7MC41OzEiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+CjwvY2lyY2xlPgo8L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDAgNTApIj4KPGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjciIGZpbGw9IiMwMGZhOWEiIHRyYW5zZm9ybT0ic2NhbGUoMC43NzM2MDUgMC43NzM2MDUpIj4KICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBiZWdpbj0iLTAuMjVzIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlTcGxpbmVzPSIwLjMgMCAwLjcgMTswLjMgMCAwLjcgMSIgdmFsdWVzPSIwOzE7MCIga2V5VGltZXM9IjA7MC41OzEiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+CjwvY2lyY2xlPgo8L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjAgNTApIj4KPGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjciIGZpbGw9IiNmZmQ3MDAiIHRyYW5zZm9ybT0ic2NhbGUoMC40MjUyNSAwLjQyNTI1KSI+CiAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgYmVnaW49Ii0wLjEyNXMiIGNhbGNNb2RlPSJzcGxpbmUiIGtleVNwbGluZXM9IjAuMyAwIDAuNyAxOzAuMyAwIDAuNyAxIiB2YWx1ZXM9IjA7MTswIiBrZXlUaW1lcz0iMDswLjU7MSIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KPC9jaXJjbGU+CjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4MCA1MCkiPgo8Y2lyY2xlIGN4PSIwIiBjeT0iMCIgcj0iNyIgZmlsbD0iI2ZmMTQ5MyIgdHJhbnNmb3JtPSJzY2FsZSgwLjExMzQxOCAwLjExMzQxOCkiPgogIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGJlZ2luPSIwcyIgY2FsY01vZGU9InNwbGluZSIga2V5U3BsaW5lcz0iMC4zIDAgMC43IDE7MC4zIDAgMC43IDEiIHZhbHVlcz0iMDsxOzAiIGtleVRpbWVzPSIwOzAuNTsxIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlVHJhbnNmb3JtPgo8L2NpcmNsZT4KPC9nPjwvc3ZnPg==);
	pointer-events:none;
	display:none
}
.prompt-title {
	width:56%;
	max-height:32px;
	line-height:32px;
	margin-top:20px;
	padding:4px;
	font-size:20px;
	font-weight:500;
	color:#333;
	text-align:center;
	overflow:scroll
}
.prompt-form {
	position:relative;
	display:inline-block;
	display:flex;
	flex-flow:row nowrap;
	justify-content:flex-start;
	align-items:center;
	width:60%;
	padding:20px 0
}
.input-box {
	width:100%;
	margin:0;
	padding:4px 28px 4px 4px;
	border:1px solid #66c;
	border-radius:4px;
	-webkit-appearance:none;
	background:#f0f0f0;
	font-size:16px;
	font-weight:500;
	color:#333
}
.input-box:hover {
	background:#e9e9e9
}
.input-clear {
	position:absolute;
	z-index:1;
	right:7px;
	width:16px;
	height:16px;
	border-radius:50%;
	overflow:hidden;
	background-size:contain;
	background-position:center;
	background-repeat:no-repeat;
	background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGZpbGw9IiMzMzMiIGQ9Ik01MTIgMEMyMjkuMiAwIDAgMjI5LjIgMCA1MTJzMjI5LjIgNTEyIDUxMiA1MTIgNTEyLTIyOS4yIDUxMi01MTJTNzk0LjggMCA1MTIgMHptMjA1LjMgNjY2LjljMTQgMTQuMSAxNCAzNi45LS4xIDUwLjktNyA3LTE2LjIgMTAuNS0yNS40IDEwLjVzLTE4LjUtMy41LTI1LjUtMTAuNkw1MTIgNTYzIDM1Ny43IDcxNy43Yy03IDcuMS0xNi4zIDEwLjYtMjUuNSAxMC42cy0xOC40LTMuNS0yNS40LTEwLjVjLTE0LjEtMTQtMTQuMS0zNi44LS4xLTUwLjlMNDYxLjIgNTEyIDMwNi43IDM1Ny4xYy0xNC0xNC4xLTE0LTM2LjkuMS01MC45czM2LjktMTQgNTAuOS4xTDUxMiA0NjFsMTU0LjMtMTU0LjhjMTQtMTQuMSAzNi44LTE0LjEgNTAuOS0uMSAxNC4xIDE0IDE0LjEgMzYuOC4xIDUwLjlMNTYyLjggNTEybDE1NC41IDE1NC45eiIvPjwvc3ZnPg==);
	display:none
}
.input-clear:hover {
	right:5px;
	border:2px solid rgba(0,0,0,.2)
}
.prompt-content {
	width:60%;
	line-height:24px;
	max-height:136px;
	padding:4px;
	font-size:12px;
	font-weight:400;
	text-align:center;
	color:#424242;
	overflow:scroll
}
.prompt-btn-box {
	position:relative;
	width:100%;
	height:40px;
	margin-top:20px;
	padding:0;
	border-top:1px solid #ccc
}
.prompt-btns {
	position:absolute;
	bottom:0;
	height:100%;
	line-height:40px;
	margin:0;
	padding:0;
	border:none;
	outline:none;
	font-size:16px;
	font-weight:500;
	text-align:center;
	overflow:hidden
}
.prompt-btns:hover {
	background:rgba(0,0,0,.2)
}
.btn-out {
	left:0;
	width:50%;
	height:100%;
	color:#ff1d8f
}
.btn-in {
	right:0;
	width:50%;
	color:#1e90ff
}
.btn-events {
	left:0;
	right:0;
	width:100%;
	color:#424242;
	display:none
}
.btn-divider {
	position:absolute;
	top:0;
	left:50%;
	width:1px;
	height:100%;
	z-index:1;
	background:#ccc
}
</style>
<div class="prompt-container">
	<div class="prompt-mask">
		<div class="prompt-box">
			<div class="preloader"></div>
			<div class="prompt-title"></div>
			<form action="#" onsubmit="return false" class="prompt-form">
				<input type="text" class="input-box" />
				<span class="input-clear"></span>
			</form>
			<div class="prompt-content"></div>
			<div class="prompt-btn-box">
				<button class="prompt-btns btn-out"></button>
				<button class="prompt-btns btn-in"></button>
				<button class="prompt-btns btn-events"></button>
				<div class="btn-divider"></div>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
(function($) {
  var prompt = {
    initial: {
      title: "请输入密码",
      content: "{% if page.prompt == "" or page.prompt == null %}此页面已设置了密码，输入正确的密码后才能继续！{% else %}{{ page.prompt }}{% endif %}",
      btnLeft: "退出",
      btnRight: "确认"
    },
    correct: {
      title: "密码正确",
      content: "恭喜你，已通过验证",
      button: "好"
    },
    count: {
      content: "密码错误！你还有 * 次机会"
    },
    error: {
      title: "密码错误",
      content: "抱歉，你已超过了输入次数",
      button: "返回首页"
    }
  };
  $(".prompt-btns").on("click", function(e) {
    if ($(this).find("#wave").length) {
      $(this)
        .find("#wave")
        .remove();
    }
    $(this).append("<div id='wave'></div>");
    var wave = $(this).find("#wave");
    wave.css({
      display: "block",
      background: "rgba(0,0,0,.3)",
      "border-radius": "50%",
      position: "absolute",
      transform: "scale(0)",
      opacity: "1",
      transition: "all 0.7s",
      "z-index": "1",
      overflow: "hidden",
      "pointer-events": "none"
    });
    waveWidth = parseInt($(this).outerWidth());
    waveHeight = parseInt($(this).outerHeight());
    if (waveWidth < waveHeight) {
      var R = waveHeight;
    } else {
      var R = waveWidth;
    }
    wave.css({
      width: R * 2 + "px",
      height: R * 2 + "px",
      top: e.pageY - $(this).offset().top - R + "px",
      left: e.pageX - $(this).offset().left - R + "px",
      transform: "scale(1)",
      opacity: "0"
    });
  });
  var i = 0,
      s = 3,
      w = 700,
      d = 1100,
      key = "{% if page.password == "" or page.password == null %}{% else %}{{ page.password }}{% endif %}";
  if (key != false) {
    document.onkeydown = function() {
      var m = window.event || arguments[0];
      if (m.keyCode == 123) {
        return false;
      } else if (m.ctrlKey && m.shiftKey && m.keyCode == 73) {
        return false;
      } else if (m.shiftKey && m.keyCode == 121) {
        return false;
      }
    };
    document.oncontextmenu = function() {
      return false;
    };
    $(".prompt-title").html(prompt.initial.title);
    $(".prompt-content").html(prompt.initial.content);
    $(".btn-out").html(prompt.initial.btnLeft);
    $(".btn-in").html(prompt.initial.btnRight);
    $(".prompt-container").css("display", "block");
    $(".prompt-box").addClass("animated bounceIn");
    setTimeout(function() {
      $(".prompt-box").removeClass("animated bounceIn");
    }, d);
    $(".prompt-mask").on("touchmove", function(e) {
      e.preventDefault();
    });
    $(".prompt-mask").on("touchend", function(e) {
      if (e.target.tagName != "INPUT") {
        $(".input-box").blur();
      }
    });
    $(".input-box").on("input propertychange", function() {
      if ($(this).val() != false) {
        $(this)
          .parent()
          .children(".input-clear")
          .show();
      } else {
        $(this)
          .parent()
          .children(".input-clear")
          .hide();
      }
    });
    $(".input-clear").on("click", function() {
      $(this)
        .parent()
        .find(".input-box")
        .focus()
        .val("");
      $(this).hide();
    });
    $(".input-box").keydown(function(e) {
      if (e.which == 13) {
        $(".btn-in").trigger("click");
        $(".input-box").blur();
      }
    });
    $(".btn-out").on("click", function() {
      $(".preloader").css("display", "block");
      setTimeout(function() {
        $("<a style='display: none' href='/'></a>")
          .appendTo("body")[0]
          .click();
      }, w);
    });
    $(".btn-in").on("click", function() {
      $(".preloader").css("display", "block");
      setTimeout(function() {
        $(".preloader").css("display", "none");
      }, w);
      var btnIn = $(this);
      btnIn.prop("disabled", true);
      setTimeout(function() {
        btnIn.prop("disabled", false);
      }, d);
      var inputVal = $(".input-box").val();
      i++;
      if (inputVal == key) {
        setTimeout(function() {
          $(".prompt-form").css("display", "none");
          $(".prompt-btns").css("display", "none");
          $(".btn-divider").css("display", "none");
          $(".btn-events").css("display", "block");
          $(".prompt-title").html(prompt.correct.title);
          $(".prompt-content").html(prompt.correct.content);
          $(".prompt-box")
            .css("border-top", "5px solid #00fa9a")
            .addClass("animated bounceIn");
          setTimeout(function() {
            $(".prompt-box").removeClass("animated bounceIn");
          }, d);
          $(".btn-events").on("click", function() {
            clearInterval(y);
            $(".prompt-mask").fadeOut(d);
          });
          $(".btn-events").html(prompt.correct.button + " (" + s + ")");
          var y = setInterval(function() {
            s--;
            if (s <= 0) {
              $(".btn-events").trigger("click");
            } else {
              $(".btn-events").html(prompt.correct.button + " (" + s + ")");
            }
          }, 1e3);
        }, w);
      } else {
        setTimeout(function() {
          $(".input-clear").hide();
          $(".input-box").val("");
          $(".input-box").css("border", "1px solid #ffd700");
          $(".prompt-content").html(prompt.count.content.replace("*", 3 - i));
          $(".prompt-box")
            .css("border-top", "5px solid #ffd700")
            .addClass("animated shake");
          setTimeout(function() {
            $(".prompt-box").removeClass("animated shake");
          }, d);
        }, w);
      }
      if (inputVal != key && i == 3) {
        setTimeout(function() {
          $(".prompt-form").css("display", "none");
          $(".prompt-btns").css("display", "none");
          $(".btn-divider").css("display", "none");
          $(".btn-events").css("display", "block");
          $(".prompt-title").html(prompt.error.title);
          $(".prompt-content").html(prompt.error.content);
          $(".prompt-box")
            .css("border-top", "5px solid #ff1493")
            .addClass("animated swing");
          setTimeout(function() {
            $(".prompt-box").removeClass("animated swing");
          }, d);
          $(".btn-events").on("click", function() {
            $(".preloader").css("display", "block");
            clearInterval(n);
            setTimeout(function() {
              $("<a style='display: none' href='/'></a>")
                .appendTo("body")[0]
                .click();
            }, w);
          });
          $(".btn-events").html(prompt.error.button + " (" + s + ")");
          var n = setInterval(function() {
            s--;
            if (s <= 0) {
              $(".btn-events").trigger("click");
            } else {
              $(".btn-events").html(prompt.error.button + " (" + s + ")");
            }
          }, 1e3);
        }, w);
      }
    });
  }
})(jQuery);
</script>