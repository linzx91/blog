<script type="text/javascript">
(function() {
  var key = "{{ page.password }}";
  if (key) {
    function password() {
      var i = 1;
      var passwd = prompt("{% if page.prompt == "" or page.prompt == null %}此页面已设置了密码，输入正确的密码后才能继续访问！{% else %}{{ page.prompt }}{% endif %}", "");
      while (i < 3) {
        if (passwd == key) {
          alert("恭喜你，密码正确。");
          break;
        }
        i++;
        var passwd = prompt("密码错误！你还有" + (4 - i) + "次机会。");
      }
      if (password != key && i == 3) {
        alert("密码错误，你已超过了输入次数！");
        location.href = "/";
      }
      return "";
    }
    password();
  }
})();
</script>